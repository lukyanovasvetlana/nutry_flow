# Обновленная навигация в приложении Nutry Flow

## Обзор изменений

В рамках улучшения пользовательского опыта была переработана навигация в приложении:

### Что изменилось:

1. **Убран FloatingActionButton** из дашборда
2. **Перенесены функции** в нижнее меню навигации
3. **Изменена логика** навигации по дашборду
4. **Упрощено меню** - убраны лишние пункты

## Структура файлов

### Основные файлы:
- `lib/app.dart` - основной контейнер приложения с навигацией
- `lib/features/dashboard/presentation/screens/dashboard_screen.dart` - экран дашборда
- `lib/features/meal_plan/presentation/screens/meal_details_screen.dart` - экран деталей блюда

### Тестовые файлы:
- `test/app_container_navigation_test.dart` - тесты новой навигации
- `test/dashboard_meal_details_navigation_test.dart` - тесты дашборда
- `test/meal_details_screen_test.dart` - тесты экрана деталей блюда

## Функциональность

### Нижняя навигация

Теперь в нижней панели навигации:
1. **Nutrigo** (иконка: home) - переход на дашборд
2. **Календарь** (иконка: calendar_today) - переход на календарь
3. **Уведомления** (иконка: notifications) - переход на уведомления
4. **Меню** (иконка: restaurant) - открытие меню с дополнительными опциями

### Меню в нижней навигации

При нажатии на "Меню" открывается модальное окно с пунктами:
- **Меню** (иконка: restaurant_menu) - переход на экран здорового меню
- **Список покупок** (иконка: shopping_cart) - переход на список покупок
- **Детали блюда** (иконка: food_bank) - переход на экран с деталями блюда

### Дашборд

Дашборд теперь:
- **Без FloatingActionButton** - убрана кнопка меню
- **Упрощенный интерфейс** - фокус на основном контенте
- **Прямая навигация** - клик на иконку дашборда возвращает на главный экран

## Навигационная логика

### AppContainer (lib/app.dart)

```dart
void _onItemTapped(int index) {
  setState(() {
    _selectedIndex = index;
  });
}
```

- **Индекс 0** - дашборд
- **Индекс 1** - календарь  
- **Индекс 2** - уведомления
- **Индекс 3** - открытие меню

### Меню (_showNutrigoMenu)

```dart
void _showNutrigoMenu(BuildContext context) {
  showModalBottomSheet(
    context: context,
    builder: (context) => SafeArea(
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          // Пункты меню
        ],
      ),
    ),
  );
}
```

## Тестирование

### Покрытие тестами:

1. **Навигация через AppContainer** (5 тестов):
   - Переход к MealDetails через меню
   - Навигация на дашборд
   - Отображение пунктов меню
   - Закрытие меню при навигации
   - Поддержание состояния навигации

2. **Дашборд** (5 тестов):
   - Отсутствие FloatingActionButton
   - Корректное отображение контента
   - Навигация и передача параметров
   - Обработка возврата
   - Отображение элементов меню

3. **MealDetails** (13 тестов):
   - Все существующие тесты экрана деталей блюда

### Запуск тестов:

```bash
# Все тесты навигации
flutter test test/app_container_navigation_test.dart test/meal_details_screen_test.dart test/dashboard_meal_details_navigation_test.dart

# Только новые тесты AppContainer
flutter test test/app_container_navigation_test.dart
```

## Дизайн и UX

### Преимущества новой навигации:

1. **Консистентность** - все основные функции доступны из одного места
2. **Простота** - убраны лишние элементы интерфейса
3. **Интуитивность** - стандартный паттерн нижней навигации
4. **Доступность** - легкий доступ к основным функциям

### Цветовая схема:

- **Активная вкладка**: зеленый цвет (0xFF4CAF50)
- **Неактивная вкладка**: серый цвет
- **Фон**: светло-бежевый (0xFFF9F4F2)

## Иконки

- **Дашборд**: Icons.home
- **Календарь**: Icons.calendar_today  
- **Уведомления**: Icons.notifications
- **Меню**: Icons.restaurant
- **Здоровое меню**: Icons.restaurant_menu
- **Список покупок**: Icons.shopping_cart
- **Детали блюда**: Icons.food_bank

## Будущие улучшения

1. **Анимации** - добавить плавные переходы между экранами
2. **Жесты** - поддержка свайпов для навигации
3. **Персонализация** - настройка порядка пунктов меню
4. **Быстрые действия** - долгое нажатие для быстрых действий
5. **Уведомления** - бейджи с количеством непрочитанных уведомлений

## Техническая реализация

### Основные компоненты:

1. **BottomNavigationBar** - основная навигация
2. **showModalBottomSheet** - модальное меню
3. **Navigator.push** - навигация между экранами
4. **setState** - управление состоянием навигации

### Управление состоянием:

- **_selectedIndex** - текущий выбранный индекс навигации
- **AppContainer** - основной контейнер с состоянием
- **StatefulWidget** - для управления состоянием навигации

## Заключение

Новая навигация делает приложение более интуитивным и удобным в использовании. Убраны лишние элементы интерфейса, основные функции сгруппированы логически, а навигация стала более предсказуемой для пользователей.

Все изменения покрыты тестами и готовы к использованию в продакшене. 